extend type Query {
  dockerImages(
    onlyFinal: Boolean = true
    filters: DockerImageFilters
  ): [DockerImage!]!
}

input DockerImageFilters {
  tags: [DockerImageTagInput!]! = []
  labels: [KeyValueInput!]! = []
  before: [ID!]! = []
  since: [ID!]! = []
  dangling: Boolean
}

type DockerImage {
  id: ID!
  name: String
  tags: [DockerImageTag!]!
  labels: [KeyValue!]!
  parent: ID!
  created: DateTime!
  size: Float!
  entrypoint: [String!]
  command: [String!]
  environment: [KeyValue!]!
  usingContainers(onlyRunning: Boolean = true): [DockerContainer!]!
}

input DockerImageTagInput {
  repository: String!
  tag: String
}

type DockerImageTag {
  repository: String!
  tag: String!
}

extend type Query {
  dockerSearchImage(search: String!): [DockerSearchImageResult!]!
}

type DockerSearchImageResult {
  name: String!
  isOfficial: Boolean!
  isAutomated: Boolean!
  description: String!
  starCount: Int!
}

extend type Query {
  dockerSearchImageTag(
    repoName: String!
    imageName: String!
  ): [DockerSearchImageTagResult!]!
}

type DockerSearchImageTagResult {
  name: String!
  size: Float!
  lastUpdated: DateTime
}
